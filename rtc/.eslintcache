[{"/home/nano/WebRTC-samples/rtc/src/index.js":"1","/home/nano/WebRTC-samples/rtc/src/App.js":"2","/home/nano/WebRTC-samples/rtc/src/reportWebVitals.js":"3","/home/nano/WebRTC-samples/rtc/src/modules/media/index.js":"4","/home/nano/WebRTC-samples/rtc/src/modules/media/components/OwnMedia.js":"5"},{"size":500,"mtime":1610759353203,"results":"6","hashOfConfig":"7"},{"size":233,"mtime":1610759353203,"results":"8","hashOfConfig":"7"},{"size":362,"mtime":1610759353203,"results":"9","hashOfConfig":"7"},{"size":82,"mtime":1610759353203,"results":"10","hashOfConfig":"7"},{"size":5590,"mtime":1610759353203,"results":"11","hashOfConfig":"7"},{"filePath":"12","messages":"13","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"14"},"qkseln",{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"14"},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"14"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"21","usedDeprecatedRules":"14"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"24"},"/home/nano/WebRTC-samples/rtc/src/index.js",[],["25","26"],"/home/nano/WebRTC-samples/rtc/src/App.js",[],"/home/nano/WebRTC-samples/rtc/src/reportWebVitals.js",[],"/home/nano/WebRTC-samples/rtc/src/modules/media/index.js",["27"],"'use strict';\n\nimport OwnMedia from './components/OwnMedia';\n\nexport { OwnMedia };","/home/nano/WebRTC-samples/rtc/src/modules/media/components/OwnMedia.js",["28","29"],"import React, { useEffect, useState, useRef } from 'react';\nimport './OwnMedia.css';\nimport \"antd/dist/antd.css\";\nimport { Cascader } from 'antd';\n\nfunction OwnMedia() {\n  const userVideo = useRef();\n\n  const [audioSources, setAudioSources] = useState([]);\n  const [audioOutputs, setAudioOutputs] = useState([]);\n  const [videoSources, setVideoSources] = useState([]);\n\n  const [currentAudioSource, setCurrentAudioSource] = useState('');\n  const [currentAudioOutput, setCurrentAudioOutput] = useState('');\n  const [currentVideoSource, setCurrentVideo] = useState('');\n\n  let UserVideo;\n\n  UserVideo = (<video ref={userVideo} playsInline muted autoPlay />);\n\n  function gotDevices(deviceInfos) {\n    // Handles being called several times to update labels. Preserve values.\n\n    let temp_audioSources = [];\n    let temp_audioOutputs = [];\n    let temp_videoSources = [];\n\n    for (let i = 0; i !== deviceInfos.length; ++i) {\n      const deviceInfo = deviceInfos[i];\n      let option = {};\n      option.value = deviceInfo.deviceId;\n      if (deviceInfo.kind === 'audioinput') {\n        option.label = deviceInfo.label || `microphone ${temp_audioSources.length + 1}`;\n        temp_audioSources.push(option);\n      } else if (deviceInfo.kind === 'audiooutput') {\n        option.label= deviceInfo.label || `speaker ${temp_audioOutputs.length + 1}`;\n        temp_audioOutputs.push(option);\n      } else if (deviceInfo.kind === 'videoinput') {\n        option.label = deviceInfo.label || `camera ${temp_videoSources.length + 1}`;\n        temp_videoSources.push(option);\n      } else {\n        console.log('Some other kind of source/device: ', deviceInfo);\n      }\n    }\n\n    setAudioSources(temp_audioSources);\n    setAudioOutputs(temp_audioOutputs);\n    setVideoSources(temp_videoSources);\n  }\n\n  function attachSinkId(element, sinkId) {\n    if (typeof element.sinkId !== 'undefined') {\n      element.setSinkId(sinkId)\n          .then(() => {\n            console.log(`Success, audio output device attached: ${sinkId}`);\n          })\n          .catch(error => {\n            let errorMessage = error;\n            if (error.name === 'SecurityError') {\n              errorMessage = `You need to use HTTPS for selecting audio output device: ${error}`;\n            }\n            console.error(errorMessage);\n            // Jump back to first output device in the list as it's the default.\n            //audioOutput.current.selectedIndex = 0;\n          });\n    } else {\n      console.warn('Browser does not support output device selection.');\n    }\n  }\n\n  function gotStream(stream) {\n    window.stream = stream; // make stream available to console\n    if(userVideo.current)\n      userVideo.current.srcObject = stream;\n    // Refresh button list in case labels have become available\n    return navigator.mediaDevices.enumerateDevices();\n  }\n\n  function handleError(error) {\n    console.log('navigator.MediaDevices.getUserMedia error: ', error.message, error.name);\n  }\n\n  function audioOutputChange(value, selectedOptions) {\n    setCurrentAudioOutput(value);\n    attachSinkId(userVideo.current, value);\n  }\n\n  function audioSourceChange(value, selectedOptions) {\n    if (window.stream) {\n      window.stream.getTracks().forEach(track => {\n        track.stop();\n      });\n    }\n\n    setCurrentAudioSource(value);\n    const audioSo = value;\n    const videoSo = currentVideoSource;\n    const constraints = {\n      audio: {deviceId: audioSo ? {exact: audioSo} : undefined},\n      video: {deviceId: videoSo ? {exact: videoSo} : undefined}\n    };\n    navigator.mediaDevices.getUserMedia(constraints).then(gotStream).then(gotDevices).catch(handleError);\n  }\n\n  function videoSourceChange(value, selectedOptions) {\n    if (window.stream) {\n      window.stream.getTracks().forEach(track => {\n        track.stop();\n      });\n    }\n\n    setCurrentVideo(value);\n    const audioSo = currentAudioSource;\n    const videoSo = value;\n    const constraints = {\n      audio: {deviceId: audioSo ? {exact: audioSo} : undefined},\n      video: {deviceId: videoSo ? {exact: videoSo} : undefined}\n    };\n    navigator.mediaDevices.getUserMedia(constraints).then(gotStream).then(gotDevices).catch(handleError);\n  }\n\n  function start() {\n    if (window.stream) {\n      window.stream.getTracks().forEach(track => {\n        track.stop();\n      });\n    }\n    const audioSo = currentAudioSource;\n    const videoSo = currentVideoSource;\n    const constraints = {\n      audio: {deviceId: audioSo ? {exact: audioSo} : undefined},\n      video: {deviceId: videoSo ? {exact: videoSo} : undefined}\n    };\n    navigator.mediaDevices.getUserMedia(constraints).then(gotStream).then(gotDevices).catch(handleError);\n  }\n\n  useEffect(() => {\n    navigator.mediaDevices.enumerateDevices().then(gotDevices).catch(handleError);\n\n    start();\n  }, []);\n\n  return (\n    <>\n      <div className=\"videoContent\">\n        {UserVideo}\n      </div>\n      <div>\n        <div>\n          <label>Audio Input Source: </label>\n          { audioSources.length !== 0 ? <Cascader options={audioSources} onChange={audioSourceChange} placeholder=\"Please select\"/> : null}\n        </div>\n        <div>\n          <label>Audio Output Destination: </label>\n          { audioOutputs.length !== 0 ? <Cascader options={audioOutputs} onChange={audioOutputChange} placeholder=\"Please select\"/> : null}\n        </div>\n        <div>\n          <label> Video Source: </label>\n          { videoSources.length !== 0 ? <Cascader options={videoSources} onChange={videoSourceChange} placeholder=\"Please select\"/> : null}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default OwnMedia;",{"ruleId":"30","replacedBy":"31"},{"ruleId":"32","replacedBy":"33"},{"ruleId":"34","severity":1,"message":"35","line":1,"column":1,"nodeType":"36","messageId":"37","endLine":1,"endColumn":14,"fix":"38"},{"ruleId":"39","severity":1,"message":"40","line":14,"column":10,"nodeType":"41","messageId":"42","endLine":14,"endColumn":28},{"ruleId":"43","severity":1,"message":"44","line":141,"column":6,"nodeType":"45","endLine":141,"endColumn":8,"suggestions":"46"},"no-native-reassign",["47"],"no-negated-in-lhs",["48"],"strict","'use strict' is unnecessary inside of modules.","ExpressionStatement","module",{"range":"49","text":"50"},"no-unused-vars","'currentAudioOutput' is assigned a value but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'start'. Either include it or remove the dependency array.","ArrayExpression",["51"],"no-global-assign","no-unsafe-negation",[0,13],"",{"desc":"52","fix":"53"},"Update the dependencies array to be: [start]",{"range":"54","text":"55"},[4785,4787],"[start]"]